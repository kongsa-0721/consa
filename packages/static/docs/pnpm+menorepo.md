### 传统项目概述

- 独立项目结构，所有的项目都是分开的github仓库
- 技术栈独立
- 规范化、自动化相关处理是项目间割裂的
- 依赖管理，版本很难统一管理
- 部署，docker、docker compose，自动化脚本很难统一

### monorepo架构

- 混合项目结构，所有相关的工程形成子包进行管理
- 技术栈高度统一（基建项目、业务项目、子服务、技术栈）
- 规范化、自动化、流程化项目间共享
- 依赖管理，版本统一管理
- 部署，docker、docker compose，自动化脚本统一部署流程

### monorepo 架构方案

- 包管理 pnpm workspace、lerna
- 构建缓存
- 增量构建，nx、turbo

### pnpm优势

- 软链接
- 缓存机制 寻址
- 原生支持workspace
- 磁盘占用少
  中心化思想解决依赖复用问题

### 传统架构到 monorepo架构演进

- 阶段1 ：传统架构的基础痛点 主要矛盾
  - 代码集中化，将多个关联的项目统一到一个仓库
  - 工具的引入，pnpm workspace
  - CI、CD重构
- 阶段2 ：具体monorepo架构
  - 公共模块抽离
  - pnpm turbo 解决子包与主包关系
- 阶段3 ：自动化构建流程优化
  - 打包方案，vite、webpack，rollup，parcel、tsup（UI、图表库）
  - 构建流程优化，依赖关系（循环依赖引用）、哪些包需要前置构建
  - 发布，npm publish、docker
  - 监控和测试

### 关键性卡点（步骤）

- 项目统一
- pnpm配置
- 依赖管理
- 统一化脚本
  - 工程化脚本 package.json中的script
  - scripts文件夹

> 我主导了工程化架构的重构工作，基于pnpm workspace统一化工程组织，统一自动化、流程、规范化相关内容，子包管理更清晰

> 基于tsup构建团队基建包、vite 构建业务包，业务架构我主导通过微前端机制来实现，统一化主应用与子应用状态管理细节

### 组件库、脚手架、业务系统工程化基于monorepo架构设计有什么实践经验，请详细说明

- 组件库，工具库，图表库
- 脚手架，基建类心态的项目模块
- 业务系统
- 服务端架构
  